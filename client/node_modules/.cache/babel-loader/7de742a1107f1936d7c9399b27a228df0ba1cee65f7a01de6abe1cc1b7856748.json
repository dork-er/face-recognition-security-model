{"ast":null,"code":"// src/components/Navbar.js\nimport React,{useState,useEffect,useRef}from'react';import{Link,useNavigate}from'react-router-dom';import axios from'axios';// Axios for HTTP requests\nimport'../styles/navbar.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Navbar=()=>{const[dropdownOpen,setDropdownOpen]=useState(false);const[profileImage,setProfileImage]=useState('/images/avatar.png');// Default avatar path\nconst dropdownRef=useRef(null);const navigate=useNavigate();// Toggle dropdown visibility\nconst toggleDropdown=()=>{setDropdownOpen(!dropdownOpen);};// Close dropdown when clicking outside\nconst handleClickOutside=e=>{if(dropdownRef.current&&!dropdownRef.current.contains(e.target)){setDropdownOpen(false);}};useEffect(()=>{document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[]);// Fetch profile image URL from the backend on component mount\nuseEffect(()=>{const fetchProfileImage=async()=>{try{const token=localStorage.getItem('token');const response=await axios.get('http://localhost:5000/user/profile',{headers:{Authorization:`Bearer ${token}`}});// Set the profile image URL if it exists, otherwise use default avatar\nconst imageUrl=response.data.profileImage||'/images/avatar.png';setProfileImage(imageUrl);}catch(error){console.error('Error fetching profile image:',error);// Default to avatar if there's an error\nsetProfileImage('/images/avatar.png');}};fetchProfileImage();},[]);// Log out the user and redirect to login page\nconst handleLogout=()=>{localStorage.removeItem('token');// Remove token to revoke session\nnavigate('/login');// Redirect to login\n};return/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"navbar-logo\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/logo512.png\",alt:\"Logo\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-profile\",ref:dropdownRef,children:[/*#__PURE__*/_jsx(\"img\",{src:profileImage,alt:\"Profile\",onClick:toggleDropdown,className:\"profile-icon\",loading:\"lazy\"}),dropdownOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-menu\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/profile'),className:\"dropdown-item\",children:\"Profile\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"dropdown-item\",children:\"Log Out\"})]})]})]});};export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","useRef","Link","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Navbar","dropdownOpen","setDropdownOpen","profileImage","setProfileImage","dropdownRef","navigate","toggleDropdown","handleClickOutside","e","current","contains","target","document","addEventListener","removeEventListener","fetchProfileImage","token","localStorage","getItem","response","get","headers","Authorization","imageUrl","data","error","console","handleLogout","removeItem","className","children","to","src","alt","ref","onClick","loading"],"sources":["C:/Users/sangm/Documents/face-recognition/client/src/components/navbar.js"],"sourcesContent":["// src/components/Navbar.js\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport axios from 'axios'; // Axios for HTTP requests\nimport '../styles/navbar.css';\n\nconst Navbar = () => {\n  const [dropdownOpen, setDropdownOpen] = useState(false);\n  const [profileImage, setProfileImage] = useState('/images/avatar.png'); // Default avatar path\n  const dropdownRef = useRef(null);\n  const navigate = useNavigate();\n\n  // Toggle dropdown visibility\n  const toggleDropdown = () => {\n    setDropdownOpen(!dropdownOpen);\n  };\n\n  // Close dropdown when clicking outside\n  const handleClickOutside = (e) => {\n    if (dropdownRef.current && !dropdownRef.current.contains(e.target)) {\n      setDropdownOpen(false);\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  // Fetch profile image URL from the backend on component mount\n  useEffect(() => {\n    const fetchProfileImage = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        const response = await axios.get('http://localhost:5000/user/profile', {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n\n        // Set the profile image URL if it exists, otherwise use default avatar\n        const imageUrl = response.data.profileImage || '/images/avatar.png';\n        setProfileImage(imageUrl);\n      } catch (error) {\n        console.error('Error fetching profile image:', error);\n        // Default to avatar if there's an error\n        setProfileImage('/images/avatar.png');\n      }\n    };\n\n    fetchProfileImage();\n  }, []);\n\n  // Log out the user and redirect to login page\n  const handleLogout = () => {\n    localStorage.removeItem('token'); // Remove token to revoke session\n    navigate('/login'); // Redirect to login\n  };\n\n  return (\n    <nav className=\"navbar\">\n      <div className=\"navbar-logo\">\n        <Link to=\"/\">\n          <img src=\"/logo512.png\" alt=\"Logo\" />\n        </Link>\n      </div>\n      <div className=\"navbar-profile\" ref={dropdownRef}>\n        <img\n          src={profileImage}\n          alt=\"Profile\"\n          onClick={toggleDropdown}\n          className=\"profile-icon\"\n          loading=\"lazy\"\n        />\n        {dropdownOpen && (\n          <div className=\"dropdown-menu\">\n            <button\n              onClick={() => navigate('/profile')}\n              className=\"dropdown-item\"\n            >\n              Profile\n            </button>\n            <button onClick={handleLogout} className=\"dropdown-item\">\n              Log Out\n            </button>\n          </div>\n        )}\n      </div>\n    </nav>\n  );\n};\n\nexport default Navbar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
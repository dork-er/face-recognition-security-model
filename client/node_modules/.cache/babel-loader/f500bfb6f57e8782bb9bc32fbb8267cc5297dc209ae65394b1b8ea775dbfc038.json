{"ast":null,"code":"import React,{useRef,useEffect,useState}from'react';import'../styles/capture.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Capture=()=>{const videoRef=useRef(null);const[streaming,setStreaming]=useState(false);const startCapture=async()=>{try{const stream=await navigator.mediaDevices.getUserMedia({video:true});if(videoRef.current){videoRef.current.srcObject=stream;setStreaming(true);}}catch(error){console.error('Error accessing webcam:',error);}};const stopCapture=()=>{if(videoRef.current&&videoRef.current.srcObject){const stream=videoRef.current.srcObject;const tracks=stream.getTracks();tracks.forEach(track=>track.stop());videoRef.current.srcObject=null;}setStreaming(false);};useEffect(()=>{// Stop capture when component unmounts\nreturn()=>{stopCapture();};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"capture-page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Live Capture\"}),/*#__PURE__*/_jsx(\"div\",{className:\"video-container\",children:/*#__PURE__*/_jsx(\"video\",{ref:videoRef,autoPlay:true,playsInline:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"controls\",children:streaming?/*#__PURE__*/_jsx(\"button\",{onClick:stopCapture,className:\"stop-button\",children:\"Stop\"}):/*#__PURE__*/_jsx(\"button\",{onClick:startCapture,className:\"start-button\",children:\"Start Capture\"})})]});};export default Capture;","map":{"version":3,"names":["React","useRef","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Capture","videoRef","streaming","setStreaming","startCapture","stream","navigator","mediaDevices","getUserMedia","video","current","srcObject","error","console","stopCapture","tracks","getTracks","forEach","track","stop","className","children","ref","autoPlay","playsInline","onClick"],"sources":["/home/cicada3301/Documents/react/face-recognition/client/src/components/capture.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport '../styles/capture.css';\n\nconst Capture = () => {\n\tconst videoRef = useRef(null);\n\tconst [streaming, setStreaming] = useState(false);\n\n\tconst startCapture = async () => {\n\t\ttry {\n\t\t\tconst stream = await navigator.mediaDevices.getUserMedia({ video: true });\n\t\t\tif (videoRef.current) {\n\t\t\t\tvideoRef.current.srcObject = stream;\n\t\t\t\tsetStreaming(true);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('Error accessing webcam:', error);\n\t\t}\n\t};\n\n\tconst stopCapture = () => {\n\t\tif (videoRef.current && videoRef.current.srcObject) {\n\t\t\tconst stream = videoRef.current.srcObject;\n\t\t\tconst tracks = stream.getTracks();\n\t\t\ttracks.forEach((track) => track.stop());\n\t\t\tvideoRef.current.srcObject = null;\n\t\t}\n\t\tsetStreaming(false);\n\t};\n\n\tuseEffect(() => {\n\t\t// Stop capture when component unmounts\n\t\treturn () => {\n\t\t\tstopCapture();\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<div className=\"capture-page\">\n\t\t\t<h1>Live Capture</h1>\n\t\t\t<div className=\"video-container\">\n\t\t\t\t<video ref={videoRef} autoPlay playsInline />\n\t\t\t</div>\n\t\t\t<div className=\"controls\">\n\t\t\t\t{streaming ? (\n\t\t\t\t\t<button onClick={stopCapture} className=\"stop-button\">\n\t\t\t\t\t\tStop\n\t\t\t\t\t</button>\n\t\t\t\t) : (\n\t\t\t\t\t<button onClick={startCapture} className=\"start-button\">\n\t\t\t\t\t\tStart Capture\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Capture;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,MAAM,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC1D,MAAO,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/B,KAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,CACrB,KAAM,CAAAC,QAAQ,CAAGR,MAAM,CAAC,IAAI,CAAC,CAC7B,KAAM,CAACS,SAAS,CAAEC,YAAY,CAAC,CAAGR,QAAQ,CAAC,KAAK,CAAC,CAEjD,KAAM,CAAAS,YAAY,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACH,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAC,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC,CAAEC,KAAK,CAAE,IAAK,CAAC,CAAC,CACzE,GAAIR,QAAQ,CAACS,OAAO,CAAE,CACrBT,QAAQ,CAACS,OAAO,CAACC,SAAS,CAAGN,MAAM,CACnCF,YAAY,CAAC,IAAI,CAAC,CACnB,CACD,CAAE,MAAOS,KAAK,CAAE,CACfC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAChD,CACD,CAAC,CAED,KAAM,CAAAE,WAAW,CAAGA,CAAA,GAAM,CACzB,GAAIb,QAAQ,CAACS,OAAO,EAAIT,QAAQ,CAACS,OAAO,CAACC,SAAS,CAAE,CACnD,KAAM,CAAAN,MAAM,CAAGJ,QAAQ,CAACS,OAAO,CAACC,SAAS,CACzC,KAAM,CAAAI,MAAM,CAAGV,MAAM,CAACW,SAAS,CAAC,CAAC,CACjCD,MAAM,CAACE,OAAO,CAAEC,KAAK,EAAKA,KAAK,CAACC,IAAI,CAAC,CAAC,CAAC,CACvClB,QAAQ,CAACS,OAAO,CAACC,SAAS,CAAG,IAAI,CAClC,CACAR,YAAY,CAAC,KAAK,CAAC,CACpB,CAAC,CAEDT,SAAS,CAAC,IAAM,CACf;AACA,MAAO,IAAM,CACZoB,WAAW,CAAC,CAAC,CACd,CAAC,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,mBACCf,KAAA,QAAKqB,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC5BxB,IAAA,OAAAwB,QAAA,CAAI,cAAY,CAAI,CAAC,cACrBxB,IAAA,QAAKuB,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC/BxB,IAAA,UAAOyB,GAAG,CAAErB,QAAS,CAACsB,QAAQ,MAACC,WAAW,MAAE,CAAC,CACzC,CAAC,cACN3B,IAAA,QAAKuB,SAAS,CAAC,UAAU,CAAAC,QAAA,CACvBnB,SAAS,cACTL,IAAA,WAAQ4B,OAAO,CAAEX,WAAY,CAACM,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,MAEtD,CAAQ,CAAC,cAETxB,IAAA,WAAQ4B,OAAO,CAAErB,YAAa,CAACgB,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,eAExD,CAAQ,CACR,CACG,CAAC,EACF,CAAC,CAER,CAAC,CAED,cAAe,CAAArB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}